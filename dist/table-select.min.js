"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.setDefaultOptions=setDefaultOptions;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var defaultOptions={className:"selectable",selectedClassName:"selected"};function setDefaultOptions(options){Object.assign(defaultOptions,options)}var TableSelect=function(){function TableSelect(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,TableSelect);if(!element||element.tagName!=="TABLE"){throw new Error("Element must be a table")}if(!element.querySelector("tbody")){throw new Error("Element must contain a 'tbody' element")}Object.assign(this,defaultOptions,options,{element:element});this.init()}_createClass(TableSelect,[{key:"_init",value:function _init(){var _this=this;this.element.classList.add(this.className);this.getRows().forEach(function(row){return _this.initRow(row)})}},{key:"_initRow",value:function _initRow(row){var _this2=this;row.addEventListener("click",function(event){console.log("SHIFT: "+event.shiftKey);console.log("CTRL: "+event.ctrlKey);_this2.getSelectedRows().forEach(function(r){return _this2.deselectRow(r)});_this2.selectRow(row)})}},{key:"destroy",value:function destroy(){var _this3=this;this.element.classList.remove(this.className);this.getRows().forEach(function(row){return _this3.destroyRow(row)})}},{key:"_destroyRow",value:function _destroyRow(row){this.deselectRow(row);row.removeEventListener("click")}},{key:"getRows",value:function getRows(){return Array.from(this.element.querySelector("tbody").children)}},{key:"getIndexOfRow",value:function getIndexOfRow(row){return this.getRows().indexOf(row)}},{key:"isRowSelected",value:function isRowSelected(row){return row.classList.contains(this.selectedClassName)}},{key:"getSelectedRows",value:function getSelectedRows(){var _this4=this;return this.getRows().filter(function(row){return _this4.isRowSelected(row)})}},{key:"getSelectedRowIndices",value:function getSelectedRowIndices(){var _this5=this;return this.getSelectedRows().map(function(row){return _this5.getIndexOfRow(row)})}},{key:"selectRow",value:function selectRow(row){var multiple=arguments.length<=1||arguments[1]===undefined?false:arguments[1];if(!this.isRowSelected(row)){var index=this.getIndexOfRow(row);row.classList.add(this.selectedClassName)}}},{key:"selectAll",value:function selectAll(){var _this6=this;this.getRows().forEach(function(row){return _this6.selectRow(row,true)})}},{key:"deselectRow",value:function deselectRow(row){if(this.isRowSelected(row)){var index=this.getIndexOfRow(row);row.classList.remove(this.selectedClassName)}}},{key:"deselectAll",value:function deselectAll(){var _this7=this;this.getRows().forEach(function(row){return _this7.deselectRow(row)})}}]);return TableSelect}();window.TableSelect=TableSelect;